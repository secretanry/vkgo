# Используем образ golang:latest в качестве базового образа
FROM golang:latest

# Устанавливаем переменную окружения GO111MODULE в значение on,
# чтобы включить поддержку модулей Go.
ENV GO111MODULE=on

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем go.mod и go.sum в рабочую директорию.
# Запускаем go mod download, чтобы скачать зависимости модулей Go.
COPY go.mod ./
COPY go.sum ./
RUN go mod download

# Копируем все файлы из текущей директории внутрь контейнера.
COPY . .

# Собираем приложение.
RUN go build -o main .

# Команда для запуска приложения при запуске контейнера.
CMD ["./main"]
